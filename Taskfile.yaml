---
version: '3'

vars:
  ROOT_DIR:
    sh: git rev-parse --show-toplevel
  PORT: 8000

tasks:
  default:
    desc: Lists tasks with or without a description
    cmds:
      - task -a
    silent: true
  update:
    desc: Update vendors
    cmds:
      - go get -u ./...
      - go mod vendor
      - go mod tidy
  deps:
    desc: Download dependencies
    cmds:
      - go get -d ./...
  test:
    desc: Run go tests
    cmds:
      - go test -v ./...
  vendor:
    desc: Generate vendor
    cmds:
      - go mod vendor
      - go mod tidy
  run:
    desc: Run go program
    cmds:
      - go run -v ./...
  help:
    desc: Run go program
    cmds:
      - go run -v ./... --help
